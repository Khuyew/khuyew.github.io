<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHAI - Первый белорусский ИИ чат</title>
    <meta name="description" content="KHAI - первый белорусский искусственный интеллект. Общайтесь, создавайте изображения, используйте голосовой ввод и многое другое.">
    <meta name="keywords" content="KHAI, ИИ, искусственный интеллект, Беларусь, чат, GPT, генерация изображений, голосовой ввод">
    <meta name="author" content="KHAI Team">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0f0f23">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="KHAI">
    
    <!-- Open Graph -->
    <meta property="og:title" content="KHAI - Первый белорусский ИИ чат">
    <meta property="og:description" content="Общайтесь с первым белорусским искусственным интеллектом. Создавайте изображения, используйте голосовой ввод и многое другое.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/logo.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="script.js" as="script">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <!-- Logo -->
                <div class="header-logo">
                    <img src="/logo.png" alt="KHAI Logo" class="logo-img">
                </div>
                
                <!-- Header Controls -->
                <div class="header-controls">
                    <!-- Model Selector -->
                    <button class="model-select-btn" id="modelSelectBtn">
                        <i class="fas fa-robot"></i>
                        <span>GPT-4</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    
                    <!-- Search -->
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="searchInput" placeholder="Поиск по сообщениям...">
                        <button class="clear-input-btn" id="clearSearchBtn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <!-- Theme Toggle -->
                    <button class="control-btn" id="themeToggle" title="Сменить тему">
                        <i class="fas fa-moon"></i>
                    </button>
                    
                    <!-- Menu Toggle -->
                    <button class="control-btn" id="menuToggle" title="Меню">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
            
            <!-- Scroll Progress -->
            <div class="scroll-progress">
                <div class="scroll-progress-bar"></div>
            </div>
        </header>

        <!-- Notifications -->
        <div class="notifications-container"></div>

        <!-- Main Chat Area -->
        <main class="chat-main">
            <!-- Messages Container -->
            <div class="messages-container" id="messagesContainer">
                <!-- Messages will be rendered here -->
            </div>

            <!-- Navigation Controls -->
            <div class="navigation-controls hidden">
                <button class="nav-btn" id="scrollToTopBtn" title="В начало">
                    <i class="fas fa-arrow-up"></i>
                </button>
                <button class="nav-btn" id="scrollToBottomBtn" title="В конец">
                    <i class="fas fa-arrow-down"></i>
                </button>
            </div>
        </main>

        <!-- Input Section -->
        <section class="input-section">
            <!-- Mode Indicator -->
            <div class="mode-indicator normal-mode">
                <i class="fas fa-keyboard"></i>
                <span>Обычный режим</span>
            </div>

            <!-- Input Progress -->
            <div class="input-progress">
                <div class="input-progress-bar"></div>
            </div>
            
            <!-- Input Stats -->
            <div class="input-stats">
                <div class="input-stat">
                    <i class="fas fa-font"></i>
                    <span>0/4000</span>
                </div>
                <div class="input-stat">
                    <i class="fas fa-file"></i>
                    <span>0</span>
                </div>
                <div class="input-stat">
                    <i class="fas fa-keyboard"></i>
                    <span>0</span>
                </div>
            </div>

            <!-- Input Wrapper -->
            <div class="input-wrapper">
                <!-- Attach Button -->
                <button class="attach-btn" id="attachButton" title="Прикрепить файлы">
                    <i class="fas fa-plus"></i>
                </button>
                <input type="file" id="fileInput" multiple accept="image/*,video/*,audio/*,.pdf,.doc,.docx" style="display: none;">
                
                <!-- Text Input -->
                <textarea id="userInput" placeholder="Введите ваше сообщение..."></textarea>
                
                <!-- Input Controls -->
                <div class="input-controls">
                    <!-- Clear Input -->
                    <button class="clear-input-btn" id="clearInputBtn">
                        <i class="fas fa-times"></i>
                    </button>
                    
                    <!-- Voice Input -->
                    <button class="input-btn" id="voiceInputBtn" title="Голосовой ввод">
                        <i class="fas fa-microphone"></i>
                    </button>
                    
                    <!-- Send Button -->
                    <button class="send-btn" id="sendButton" title="Отправить сообщение">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <!-- Attached Files -->
            <div class="attached-files"></div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn normal-mode active" id="normalModeBtn">
                    <i class="fas fa-keyboard"></i>
                    <span>Обычный</span>
                    <span class="action-mode-text">TEXT</span>
                </button>
                <button class="action-btn image-mode" id="imageModeBtn">
                    <i class="fas fa-image"></i>
                    <span>Изображения</span>
                    <span class="action-mode-text">IMG</span>
                </button>
                <button class="action-btn voice-mode" id="voiceModeBtn">
                    <i class="fas fa-microphone"></i>
                    <span>Голос</span>
                    <span class="action-mode-text">VOICE</span>
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <!-- Footer Controls -->
                <div class="footer-controls">
                    <button class="footer-btn" id="clearChatBtn" title="Очистить чат">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="footer-btn" id="downloadChatBtn" title="Скачать чат">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="footer-btn" id="helpBtn" title="Помощь">
                        <i class="fas fa-question"></i>
                    </button>
                </div>
                
                <!-- Current Chat Info -->
                <div class="current-chat-info">
                    <i class="fas fa-comment"></i>
                    <span>Новый чат</span>
                </div>
                
                <!-- Status -->
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>KHAI онлайн</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Sidebar Menu -->
    <aside class="sidebar-menu">
        <div class="sidebar-header">
            <h3>KHAI Меню</h3>
            <button class="sidebar-close" id="sidebarClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- Language Selector -->
            <div class="sidebar-section">
                <h4>Язык</h4>
                <div class="language-selector">
                    <button class="lang-btn active" data-lang="ru">Русский</button>
                    <button class="lang-btn" data-lang="en">English</button>
                </div>
            </div>

            <!-- Sound Settings -->
            <div class="sidebar-section">
                <h4>Звук</h4>
                <button class="sidebar-btn" id="soundToggle">
                    <i class="fas fa-volume-up"></i>
                    <span>Звуки включены</span>
                </button>
            </div>

            <!-- Chat Management -->
            <div class="sidebar-section">
                <h4>Чаты</h4>
                <button class="sidebar-btn primary" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    <span>Новый чат</span>
                </button>
                
                <!-- Chat Search -->
                <div class="search-chats">
                    <i class="fas fa-search"></i>
                    <input type="text" id="chatSearchInput" placeholder="Поиск чатов...">
                </div>
                
                <!-- Chat List -->
                <div class="chat-list">
                    <!-- Chats will be rendered here -->
                </div>
            </div>

            <!-- Actions -->
            <div class="sidebar-section">
                <h4>Действия</h4>
                <button class="sidebar-btn" id="exportChatBtn">
                    <i class="fas fa-download"></i>
                    <span>Экспортировать чат</span>
                </button>
                <button class="sidebar-btn" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                    <span>Настройки</span>
                </button>
                <button class="sidebar-btn danger" id="clearAllChatsBtn">
                    <i class="fas fa-trash"></i>
                    <span>Очистить все чаты</span>
                </button>
            </div>

            <!-- Watermark -->
            <div class="sidebar-watermark">
                <img src="/logo.png" alt="KHAI Watermark" class="logo-img">
            </div>
        </div>
    </aside>

    <!-- Model Selection Modal -->
    <div class="modal" id="modelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Выбор модели</h3>
                <button class="modal-close" id="modelModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="model-list">
                <div class="model-item active" data-model="gpt-4">
                    <div class="model-name">GPT-4</div>
                    <div class="model-description">Наиболее продвинутая модель с расширенными возможностями анализа</div>
                </div>
                <div class="model-item" data-model="gpt-3.5">
                    <div class="model-name">GPT-3.5 Turbo</div>
                    <div class="model-description">Быстрая и эффективная модель для повседневных задач</div>
                </div>
                <div class="model-item" data-model="claude-2">
                    <div class="model-name">Claude 2</div>
                    <div class="model-description">Специализированная модель для анализа документов и кода</div>
                </div>
                <div class="model-item" data-model="bard">
                    <div class="model-name">Google Bard</div>
                    <div class="model-description">Модель с интеграцией поиска Google</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for attachments -->
    <input type="file" id="fileInput" multiple style="display: none;">

    <!-- Scripts -->
    <script src="script.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>
