<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHAI - –ü–µ—Ä–≤—ã–π –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –ò–ò —á–∞—Ç</title>
    <meta name="description" content="–ü–µ—Ä–≤—ã–π –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –ò–ò —á–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0f0f23">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="KHAI">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header" id="appHeader">
            <div class="header-content">
                <!-- Logo -->
                <div class="logo" onclick="chatApp.createNewChat()">KHAI</div>
                
                <!-- Header Controls -->
                <div class="header-controls">
                    <!-- Model Selector -->
                    <div class="model-select-wrapper">
                        <span class="model-icon">ü§ñ</span>
                        <select id="modelSelect" class="model-select" title="–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏">
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5">GPT-3.5</option>
                            <option value="claude-2">Claude 2</option>
                            <option value="llama-2">Llama 2</option>
                        </select>
                    </div>
                    
                    <!-- Search -->
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="headerSearchInput" placeholder="–ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ...">
                    </div>
                </div>
                
                <!-- Header Buttons -->
                <div class="header-buttons">
                    <button class="control-btn" id="themeToggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="control-btn" id="menuToggle" title="–ú–µ–Ω—é">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Controls -->
        <div class="navigation-controls hidden" id="navControls">
            <button class="nav-btn" id="scrollToTop" title="–í –Ω–∞—á–∞–ª–æ">
                <i class="fas fa-arrow-up"></i>
            </button>
            <button class="nav-btn" id="scrollToBottom" title="–í –∫–æ–Ω–µ—Ü">
                <i class="fas fa-arrow-down"></i>
            </button>
        </div>

        <!-- Main Chat Area -->
        <main class="chat-main" id="chatMain">
            <div class="messages-container" id="messagesContainer">
                <!-- Messages will be inserted here -->
            </div>
        </main>

        <!-- Input Section -->
        <section class="input-section" id="inputSection">
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn" id="toggleContext" title="–ö–æ–Ω—Ç–µ–∫—Å—Ç">
                    <i class="fas fa-brain"></i>
                </button>
                <button class="action-btn" id="clearChatBtn" title="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç">
                    <i class="fas fa-trash"></i>
                </button>
                <button class="action-btn" id="exportChatBtn" title="–≠–∫—Å–ø–æ—Ä—Ç">
                    <i class="fas fa-download"></i>
                </button>
            </div>

            <!-- Input Wrapper -->
            <div class="input-wrapper">
                <!-- Attach Button (Left) -->
                <button class="attach-btn" id="attachFile" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                    <i class="fas fa-plus"></i>
                </button>
                <input type="file" id="fileInput" accept="image/*,application/pdf" multiple style="display: none;">
                
                <!-- Text Input -->
                <textarea 
                    id="userInput" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ... (Shift+Enter –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏)"
                    rows="1"
                ></textarea>
                
                <!-- Input Controls (Right) -->
                <div class="input-controls">
                    <button class="input-btn" id="clearInput" title="–û—á–∏—Å—Ç–∏—Ç—å">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="input-btn" id="voiceInput" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="send-btn" id="sendMessage" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å (Enter)">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <!-- Attached Files -->
            <div class="attached-files" id="attachedFiles">
                <!-- Attached files will be shown here -->
            </div>
        </section>

        <!-- Footer -->
        <footer class="app-footer" id="appFooter">
            <div class="footer-content">
                <!-- Chat Info -->
                <div class="current-chat-info" id="currentChatInfo">
                    <i class="fas fa-comment"></i> –ù–æ–≤—ã–π —á–∞—Ç
                </div>
                
                <!-- Message Counter -->
                <div class="message-counter" id="messageCounter">
                    0 —Å–æ–æ–±—â–µ–Ω–∏–π
                </div>
                
                <!-- Context Status -->
                <div class="context-status" id="contextStatus">
                    <div class="status-dot"></div>
                    <span>–ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Notifications Container -->
    <div class="notifications-container" id="notificationsContainer"></div>

    <!-- Sidebar Menu -->
    <div class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-header">
            <h3>–ú–µ–Ω—é —á–∞—Ç–∞</h3>
            <button class="sidebar-close" id="sidebarClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="sidebar-content">
            <!-- Chat Search -->
            <div class="search-chats">
                <i class="fas fa-search"></i>
                <input type="text" id="chatSearchInput" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤...">
            </div>
            
            <!-- Chat List -->
            <div class="sidebar-section">
                <h4>–ß–∞—Ç—ã</h4>
                <div class="chat-list" id="chatList">
                    <!-- Chat items will be inserted here -->
                </div>
            </div>
            
            <!-- Chat Management -->
            <div class="sidebar-section">
                <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h4>
                <button class="sidebar-btn primary" id="newChatBtn">
                    <i class="fas fa-plus"></i> –ù–æ–≤—ã–π —á–∞—Ç
                </button>
                <button class="sidebar-btn" id="clearChatBtn">
                    <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç
                </button>
                <button class="sidebar-btn" id="exportChatBtn">
                    <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;">
                <button class="sidebar-btn" onclick="document.getElementById('importFile').click()">
                    <i class="fas fa-upload"></i> –ò–º–ø–æ—Ä—Ç —á–∞—Ç–∞
                </button>
            </div>
            
            <!-- About -->
            <div class="sidebar-section">
                <h4>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h4>
                <div class="about-content">
                    <div class="about-item">
                        <strong>KHAI</strong>
                        <span>–ü–µ—Ä–≤—ã–π –±–µ–ª–æ—Ä—É—Å—Å–∫–∏–π –ò–ò —á–∞—Ç</span>
                    </div>
                    <div class="about-item">
                        <strong>–í–µ—Ä—Å–∏—è</strong>
                        <span>1.0.0</span>
                    </div>
                    <div class="about-item">
                        <strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</strong>
                        <a href="mailto:support@khai.chat">
                            <i class="fas fa-envelope"></i> support@khai.chat
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Hidden file input for import -->
    <input type="file" id="importFile" accept=".json" style="display: none;">

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
