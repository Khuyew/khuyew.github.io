<!DOCTYPE html>
<html lang="be" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js','ym');
    
        ym(104843405,'init', {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true,
            webvisor:true,
            ecommerce:"dataLayer"
        });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/104843405" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#121212">
    
    <!-- SEO Meta Tags -->
    <title>KHAI ‚Äî –ü–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫ | –ë—è—Å–ø–ª–∞—Ç–Ω—ã AI —á–∞—Ç</title>
    <meta name="description" content="KHAI ‚Äî –ø–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–∞—Å—ñ—Å—Ç—ç–Ω—Ç –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ã—è–π –≤—ã—è–≤–∞—û —ñ –≥–æ–ª–∞—Å—É. –ë—è—Å–ø–ª–∞—Ç–Ω—ã AI-—á–∞—Ç –∑ –ø–∞–¥—Ç—Ä—ã–º–∫–∞–π —Ñ–∞–π–ª–∞—û —ñ —à–º–∞—Ç–º–æ—û–Ω—ã–º —ñ–Ω—Ç—ç—Ä—Ñ–µ–π—Å–∞–º">
    <meta name="keywords" content="KHAI, –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü, —à—Ç—É—á–Ω—ã —ñ–Ω—Ç—ç–ª–µ–∫—Ç, AI –ø–∞–º–æ—á–Ω—ñ–∫, —á–∞—Ç –∑ –Ü–Ü, –≥–µ–Ω–µ—Ä–∞—Ü—ã—è –≤—ã—è–≤–∞—û, –≥–∞–ª–∞—Å–∞–≤—ã –Ü–Ü, –Ü–Ü –ë–µ–ª–∞—Ä—É—Å—å">
    <meta name="author" content="KHAI Team">
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="googlebot" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="KHAI Assistant">
    <meta property="og:title" content="KHAI ‚Äî –ü–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫">
    <meta property="og:description" content="–ë—è—Å–ø–ª–∞—Ç–Ω—ã –Ü–Ü-–∞—Å—ñ—Å—Ç—ç–Ω—Ç –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ã—è–π –≤—ã—è–≤–∞—û —ñ –≥–æ–ª–∞—Å—É. –ê–Ω–∞–ª—ñ–∑ —Ñ–∞–π–ª–∞—û, –Ω–∞–ø—ñ—Å–∞–Ω–Ω–µ –∫–æ–¥–∞, —à–º–∞—Ç–º–æ—û–Ω–∞—è –ø–∞–¥—Ç—Ä—ã–º–∫–∞">
    <meta property="og:image" content="./icon.svg">
    <meta property="og:url" content="./">
    <meta property="og:locale" content="be_BY">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KHAI ‚Äî –ü–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫">
    <meta name="twitter:description" content="–ë—è—Å–ø–ª–∞—Ç–Ω—ã –Ü–Ü-–∞—Å—ñ—Å—Ç—ç–Ω—Ç –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ã—è–π –≤—ã—è–≤–∞—û —ñ –≥–æ–ª–∞—Å—É">
    <meta property="twitter:image" content="./icon.svg">
    <meta name="twitter:site" content="@khai_assistant">
    
    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "KHAI Assistant",
        "url": "./",
        "description": "–ü–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫ –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ã—è–π –≤—ã—è–≤–∞—û —ñ –≥–æ–ª–∞—Å—É",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Any",
        "permissions": "microphone",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "KHAI",
            "url": "./"
        }
    }
    </script>

    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json" crossorigin="use-credentials">
    <link rel="icon" type="image/svg+xml" href="./icon.svg">
    <link rel="apple-touch-icon" href="./icon.svg">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" as="style">
    <link rel="preload" href="./styles.css" as="style">
    <link rel="preload" href="./script.js" as="script">
    <link rel="preload" href="./i18n.js" as="script">
    
    <!-- Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css">
    <link rel="stylesheet" href="./styles.css">
    
    <!-- Puter AI SDK -->
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader" id="preloader">
        <div class="preloader-content">
            <div class="preloader-logo">
                <i class="ti ti-brain"></i>
            </div>
            <div class="preloader-spinner">
                <i class="ti ti-refresh"></i>
            </div>
            <p class="preloader-text">–ó–∞–≥—Ä—É–∑–∫–∞ KHAI Assistant...</p>
        </div>
    </div>

    <!-- 404 Page (hidden by default) -->
    <div class="page-404" id="page404" style="display: none;">
        <div class="error-container">
            <div class="error-logo">
                <i class="ti ti-brain"></i>
            </div>
            <h1>404 - –°—Ç–∞—Ä–æ–Ω–∫–∞ –Ω–µ –∑–Ω–æ–π–¥–∑–µ–Ω–∞</h1>
            <p>–ó–∞–ø—ã—Ç–∞–Ω–∞—è —Å—Ç–∞—Ä–æ–Ω–∫–∞ –Ω–µ —ñ—Å–Ω—É–µ —Ü—ñ –±—ã–ª–∞ –ø–µ—Ä–∞–º–µ—à—á–∞–Ω–∞.</p>
            <button class="error-btn" id="errorBackBtn">–í—è—Ä–Ω—É—Ü—Ü–∞ —û –ø—Ä—ã–∫–ª–∞–¥–∞–Ω–Ω–µ</button>
        </div>
    </div>

    <!-- Tutorial Overlay -->
    <div class="tutorial-overlay" id="tutorialOverlay" style="display: none;">
        <div class="tutorial-content">
            <div class="tutorial-step active" id="tutorialStep1">
                <h3>–°–∞—Ä–¥—ç—á–Ω–∞ –∑–∞–ø—Ä–∞—à–∞–µ–º —É KHAI Assistant! üöÄ</h3>
                <p>–ü—Ä–∞–π–¥–∑—ñ—Ü–µ –∫–∞—Ä–æ—Ç–∫—ñ —Ç—É—Ä –ø–∞ –∞—Å–Ω–æ—û–Ω—ã—Ö —Ñ—É–Ω–∫—Ü—ã—è—Ö –ø—Ä—ã–∫–ª–∞–¥–∞–Ω–Ω—è, –∫–∞–± –ø–∞—á–∞—Ü—å —ç—Ñ–µ–∫—Ç—ã—û–Ω–∞ –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞—Ü—å –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫–∞.</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="skipTutorialBtn">–ü—Ä–∞–ø—É—Å—Ü—ñ—Ü—å</button>
                    <button class="tutorial-btn primary" id="nextStepBtn1">–î–∞–ª–µ–π</button>
                </div>
            </div>
            <div class="tutorial-step" id="tutorialStep2">
                <h3>–ê—Å–Ω–æ—û–Ω–∞–µ –º–µ–Ω—é</h3>
                <p>–¢—É—Ç –≤—ã –º–æ–∂–∞—Ü–µ –∫—ñ—Ä–∞–≤–∞—Ü—å —á–∞—Ç–∞–º—ñ, —Å—Ç–≤–∞—Ä–∞—Ü—å –Ω–æ–≤—ã—è, —ñ–º–ø–∞—Ä—Ç–∞–≤–∞—Ü—å —ñ —ç–∫—Å–ø–∞—Ä—Ç–∞–≤–∞—Ü—å –≥—ñ—Å—Ç–æ—Ä—ã—é —Ä–∞–∑–º–æ—û.</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="prevStepBtn2">–ù–∞–∑–∞–¥</button>
                    <button class="tutorial-btn primary" id="nextStepBtn2">–î–∞–ª–µ–π</button>
                </div>
            </div>
            <div class="tutorial-step" id="tutorialStep3">
                <h3>–í—ã–±–∞—Ä –º–∞–¥—ç–ª—ñ –Ü–Ü</h3>
                <p>–í—ã–±—ñ—Ä–∞–π—Ü–µ –ø–∞–º—ñ–∂ —Ä–æ–∑–Ω—ã–º—ñ –º–∞–¥—ç–ª—è–º—ñ –Ü–Ü —É –∑–∞–ª–µ–∂–Ω–∞—Å—Ü—ñ –∞–¥ –≤–∞—à—ã—Ö –∑–∞–¥–∞—á. –ö–æ–∂–Ω–∞—è –º–∞–¥—ç–ª—å –º–∞–µ —Å–≤–∞–µ –∞—Å–∞–±–ª—ñ–≤–∞—Å—Ü—ñ.</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="prevStepBtn3">–ù–∞–∑–∞–¥</button>
                    <button class="tutorial-btn primary" id="nextStepBtn3">–î–∞–ª–µ–π</button>
                </div>
            </div>
            <div class="tutorial-step" id="tutorialStep4">
                <h3>–†—ç–∂—ã–º—ã –ø—Ä–∞—Ü—ã</h3>
                <p>–í—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–π—Ü–µ —Ä–æ–∑–Ω—ã—è —Ä—ç–∂—ã–º—ã: –∑–≤—ã—á–∞–π–Ω—ã —á–∞—Ç, –≥–µ–Ω–µ—Ä–∞—Ü—ã—è –≤—ã—è–≤–∞—û —Ü—ñ —Å—Ç–≤–∞—Ä—ç–Ω–Ω–µ –≥–∞–ª–∞—Å–∞–≤—ã—Ö –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—è—û.</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="prevStepBtn4">–ù–∞–∑–∞–¥</button>
                    <button class="tutorial-btn primary" id="nextStepBtn4">–î–∞–ª–µ–π</button>
                </div>
            </div>
            <div class="tutorial-step" id="tutorialStep5">
                <h3>–ü—Ä—ã–º–∞—Ü–∞–≤–∞–Ω–Ω–µ —Ñ–∞–π–ª–∞—û</h3>
                <p>–ó–∞–≥—Ä—É–∂–∞–π—Ü–µ –≤—ã—è–≤—ã —ñ —Ç—ç–∫—Å—Ç–∞–≤—ã—è —Ñ–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É. –Ü–Ü –¥–∞–ø–∞–º–æ–∂–∞ –≤–∞–º –∑ —ñ—Ö –∑–º–µ—Å—Ç–∞–º.</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="prevStepBtn5">–ù–∞–∑–∞–¥</button>
                    <button class="tutorial-btn primary" id="nextStepBtn5">–î–∞–ª–µ–π</button>
                </div>
            </div>
            <div class="tutorial-step" id="tutorialStep6">
                <h3>–ì–∞—Ç–æ–≤—ã—è –¥–∞ –≤—ã–∫–∞—Ä—ã—Å—Ç–∞–Ω–Ω—è! üéâ</h3>
                <p>–¶—è–ø–µ—Ä –≤—ã –≤–µ–¥–∞–µ—Ü–µ —û—Å–µ –∞—Å–Ω–æ—û–Ω—ã—è —Ñ—É–Ω–∫—Ü—ã—ñ KHAI Assistant. –ü–∞—á–Ω—ñ—Ü–µ –∞–±–º–µ–Ω –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—è–º—ñ –∑ –Ü–Ü –ø—Ä–∞–º–∞ –∑–∞—Ä–∞–∑!</p>
                <div class="tutorial-actions">
                    <button class="tutorial-btn secondary" id="prevStepBtn6">–ù–∞–∑–∞–¥</button>
                    <button class="tutorial-btn primary" id="finishTutorialBtn">–ü–∞—á–∞—Ü—å –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞—Ü—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Warning Modal -->
    <div class="modal-overlay" id="contextWarningModal">
        <div class="modal">
            <div class="modal-header">
                <h3>–ö–∞–Ω—Ç—ç–∫—Å—Ç –∞–º–∞–ª—å –∑–∞–ø–∞—û–Ω–µ–Ω—ã</h3>
                <button class="modal-close" id="contextWarningModalClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="context-warning-content">
                    <div class="context-warning-icon">
                        <i class="ti ti-alert-triangle"></i>
                    </div>
                    <h4>–ö–∞–Ω—Ç—ç–∫—Å—Ç –∞–º–∞–ª—å –∑–∞–ø–∞—û–Ω–µ–Ω—ã</h4>
                    <p>–í—ã –≤—ã–∫–∞—Ä—ã—Å—Ç–∞–ª—ñ <span id="contextWarningPercentage">80</span>% –¥–∞—Å—Ç—É–ø–Ω–∞–≥–∞ –∫–∞–Ω—Ç—ç–∫—Å—Ç—É. –î–ª—è –ª–µ–ø—à–∞–π –ø—Ä–∞—Ü—ã –Ü–Ü —Ä—ç–∫–∞–º–µ–Ω–¥—É–µ—Ü—Ü–∞ –ø–∞—á–∞—Ü—å –Ω–æ–≤—ã —á–∞—Ç.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="contextWarningContinue">–ü—Ä–∞—Ü—è–≥–Ω—É—Ü—å —É –±—è–≥—É—á—ã–º</button>
                <button class="modal-btn primary" id="contextWarningNewChat">–°—Ç–≤–∞—Ä—ã—Ü—å –Ω–æ–≤—ã —á–∞—Ç</button>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo" id="logoBtn">
                        <i class="ti ti-brain"></i>
                    </div>
                </div>
                
                <button class="control-btn model-select-btn" id="modelSelectBtn" title="–í—ã–±—Ä–∞—Ü—å –º–∞–¥—ç–ª—å –Ü–Ü">
                    <i class="ti ti-cpu"></i>
                </button>
                
                <div class="header-search-container">
                    <div class="search-wrapper">
                        <i class="ti ti-search"></i>
                        <input type="text" id="headerSearch" placeholder="–ü–æ—à—É–∫ –ø–∞ —á–∞—Ü–µ..." aria-label="–ü–æ—à—É–∫ –ø–∞ –≥—ñ—Å—Ç–æ—Ä—ã—ñ —á–∞—Ç–∞">
                        <button class="search-clear" id="headerSearchClear" style="display: none;" aria-label="–ê—á—ã—Å—Ü—ñ—Ü—å –ø–æ—à—É–∫">
                            <i class="ti ti-x"></i>
                        </button>
                    </div>
                </div>
                
                <div class="header-controls">
                    <button class="control-btn" id="themeToggle" aria-label="–ü–µ—Ä–∞–∫–ª—é—á—ã—Ü—å —Ç—ç–º—É">
                        <i class="ti ti-moon"></i>
                    </button>
                    <button class="control-btn menu-toggle" id="menuToggle" aria-label="–ê–¥–∫—Ä—ã—Ü—å –º–µ–Ω—é">
                        <i class="ti ti-menu-2"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Chat Area -->
        <main class="chat-main">
            <div class="messages-container" id="messagesContainer" aria-live="polite">
                <!-- Messages will be dynamically added here -->
            </div>

            <!-- Floating Particles for Empty Chat -->
            <div class="floating-particles" id="floatingParticles"></div>

            <!-- Minimap & Navigation -->
            <div class="chat-minimap-container">
                <div class="minimap-header">
                    <!-- Theme toggle removed from minimap -->
                </div>
                <div class="chat-minimap" id="chatMinimap">
                    <div class="minimap-content" id="minimapContent"></div>
                    <div class="minimap-viewport" id="minimapViewport"></div>
                </div>
                <div class="minimap-navigation">
                    <button class="nav-btn" id="scrollToLastAI" title="–î–∞ –∞–ø–æ—à–Ω—è–≥–∞ –∞–¥–∫–∞–∑—É –Ü–Ü">
                        <i class="ti ti-arrow-up"></i>
                    </button>
                    <button class="nav-btn" id="scrollToBottom" title="–î–∞ –Ω—ñ–∑—É —á–∞—Ç–∞">
                        <i class="ti ti-arrow-down"></i>
                    </button>
                </div>
            </div>
        </main>

        <!-- Input Section -->
        <div class="input-section" id="inputSection">
            <div class="mode-indicator">
                <i class="ti ti-message"></i> –ó–≤—ã—á–∞–π–Ω—ã —Ä—ç–∂—ã–º
            </div>
            
            <!-- Context Counter -->
            <div class="context-counter" id="contextCounter">
                <span id="contextCounterText">–ö–∞–Ω—Ç—ç–∫—Å—Ç: 0/128000 —Ç–æ–∫–µ–Ω–∞—û</span>
                <div class="context-counter-tooltip" id="contextCounterTooltip" data-tooltip="–¢–æ–∫–µ–Ω—ã - –≥—ç—Ç–∞ –∞–¥–∑—ñ–Ω–∫—ñ —Ç—ç–∫—Å—Ç—É, —è–∫—ñ—è –Ü–Ü –≤—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–µ –¥–ª—è —Ä–∞–∑—É–º–µ–Ω–Ω—è –∫–∞–Ω—Ç—ç–∫—Å—Ç—É. –ü—Ä—ã –Ω–∞–±–ª—ñ–∂—ç–Ω–Ω—ñ –¥–∞ –ª—ñ–º—ñ—Ç—É —Ä–∫–∞–º–µ–Ω–¥—É–µ—Ü—Ü–∞ –ø–∞—á–∞—Ü—å –Ω–æ–≤—ã —á–∞—Ç.">
                    <i class="ti ti-help"></i>
                </div>
            </div>
            
            <div class="input-wrapper">
                <button class="attach-btn" id="attachFileBtn" title="–ü—Ä—ã–º–∞—Ü–∞–≤–∞—Ü—å —Ñ–∞–π–ª">
                    <i class="ti ti-paperclip"></i>
                    <input type="file" id="fileInput" accept="image/*,.txt,.md,.html,.css,.js,.json,.py,.java,.cpp,.c,.cs,.php,.rb,.go,.swift,.kt,.scala,.rs,.xml,.csv,.yaml,.yml" multiple style="display: none;">
                </button>
                
                <textarea 
                    id="userInput" 
                    placeholder="–ó–∞–¥–∞–π—Ü–µ –ø—ã—Ç–∞–Ω–Ω–µ —Ü—ñ –∞–ø—ñ—à—ã—Ü–µ –≤—ã—è–≤—É..." 
                    autocomplete="off" 
                    rows="1"
                    maxlength="4000"
                    aria-label="–ü–æ–ª–µ —û–≤–æ–¥—É –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—è"
                ></textarea>
                
                <div class="input-controls">
                    <button class="input-btn" id="clearInputBtn" title="–ê—á—ã—Å—Ü—ñ—Ü—å —É–≤–æ–¥" style="display: none;">
                        <i class="ti ti-x"></i>
                    </button>
                    <button class="input-btn" id="voiceInputBtn" title="–ì–∞–ª–∞—Å–∞–≤—ã —û–≤–æ–¥">
                        <i class="ti ti-microphone"></i>
                    </button>
                    <button class="send-btn" id="sendBtn" title="–ê–¥–ø—Ä–∞–≤—ñ—Ü—å –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω–µ">
                        <i class="ti ti-send"></i>
                    </button>
                </div>
            </div>

            <div class="attached-files" id="attachedFiles"></div>

            <div class="action-buttons">
                <button class="action-btn mode-btn active" id="normalModeBtn">
                    <i class="ti ti-message"></i>
                    <span class="btn-text">–ó–≤—ã—á–∞–π–Ω—ã</span>
                </button>
                <button class="action-btn mode-btn" id="generateVoiceBtn">
                    <i class="ti ti-microphone"></i>
                    <span class="btn-text">–ì–æ–ª–∞—Å</span>
                </button>
                <button class="action-btn mode-btn" id="generateImageBtn">
                    <i class="ti ti-photo"></i>
                    <span class="btn-text">–í—ã—è–≤—ã</span>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <div class="current-chat-info">
                    <i class="ti ti-message"></i>
                    <span id="currentChatName">–ê—Å–Ω–æ—û–Ω—ã —á–∞—Ç</span>
                </div>
                
                <div class="connection-status">
                    <i class="ti ti-circle" id="connectionStatusIcon"></i>
                    <span id="connectionStatusText">–ü–∞–¥–∫–ª—é—á—ç–Ω–Ω–µ...</span>
                </div>
                
                <div class="footer-controls">
                    <button class="footer-btn" id="helpBtn" title="–î–∞–ø–∞–º–æ–≥–∞ —ñ –Ω–∞–≤—É—á–∞–Ω–Ω–µ">
                        <i class="ti ti-help"></i>
                    </button>
                    <button class="footer-btn" id="downloadChatBtn" title="–°–ø–∞–º–ø–∞–≤–∞—Ü—å —á–∞—Ç">
                        <i class="ti ti-download"></i>
                    </button>
                    <button class="footer-btn" id="clearChatBtn" title="–ê—á—ã—Å—Ü—ñ—Ü—å —á–∞—Ç">
                        <i class="ti ti-eraser"></i>
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Sidebar Menu -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="sidebar-menu" id="sidebarMenu">
        <div class="sidebar-header">
            <div class="sidebar-header-content">
                <div class="sidebar-logo">
                    <i class="ti ti-brain"></i>
                </div>
                <h3>KHAI <span class="beta-badge">BETA</span></h3>
            </div>
            <div class="sidebar-header-controls">
                <button class="sidebar-blog-btn" id="sidebarBlogBtn" title="–ë–ª–æ–≥">
                    <i class="ti ti-news"></i>
                </button>
                <button class="sidebar-close" id="sidebarClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
        </div>
        
        <div class="sidebar-content">
            <!-- Language Selector -->
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="be">–ë–µ–ª–∞—Ä—É—Å–∫—ñ</option>
                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                </select>
            </div>

            <!-- PWA Install Button -->
            <div class="pwa-install-section">
                <button class="pwa-install-btn" id="pwaInstallBtn" style="display: none;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <i class="ti ti-download"></i>
                        <span>–£—Å—Ç–∞–ª—è–≤–∞—Ü—å –ø—Ä—ã–∫–ª–∞–¥–∞–Ω–Ω–µ</span>
                        <span class="badge">–ù–û–í–ê–ï</span>
                    </div>
                    <button class="pwa-install-btn-close" id="pwaInstallBtnClose">
                        <i class="ti ti-x"></i>
                    </button>
                </button>
            </div>

            <div class="sidebar-search-container">
                <div class="search-wrapper">
                    <i class="ti ti-search"></i>
                    <input type="text" id="sidebarSearch" placeholder="–ü–æ—à—É–∫ –ø–∞ —á–∞—Ç–∞—Ö..." aria-label="–ü–æ—à—É–∫ –ø–∞ —á–∞—Ç–∞—Ö">
                    <button class="search-clear" id="sidebarSearchClear" style="display: none;" aria-label="–ê—á—ã—Å—Ü—ñ—Ü—å –ø–æ—à—É–∫">
                        <i class="ti ti-x"></i>
                    </button>
                </div>
            </div>

            <div class="sidebar-section">
                <h4><i class="ti ti-messages"></i> –ú–∞–µ —á–∞—Ç—ã</h4>
                <div class="chat-list" id="chatList"></div>
                <div class="chat-management-buttons">
                    <button class="sidebar-btn primary" id="newChatBtn">
                        <i class="ti ti-plus"></i> –ù–æ–≤—ã —á–∞—Ç
                    </button>
                    <button class="sidebar-btn" id="importChatBtn">
                        <i class="ti ti-upload"></i> –Ü–º–ø–∞—Ä—Ç —á–∞—Ç–∞
                    </button>
                    <button class="sidebar-btn danger" id="deleteAllChatsBtn">
                        <i class="ti ti-trash"></i> –í—ã–¥–∞–ª—ñ—Ü—å —É—Å–µ
                    </button>
                </div>
            </div>

            <div class="sidebar-section">
                <h4><i class="ti ti-brain"></i> –ú–∞–¥—ç–ª—å –Ü–Ü</h4>
                <div class="current-model-info">
                    <span id="currentModelInfo">GPT-5 Nano</span>
                    <span class="connection-status" id="connectionStatus">üîÑ –ü—Ä–∞–≤–µ—Ä–∫–∞...</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h4><i class="ti ti-info-circle"></i> –ê–± –ø—Ä—ã–∫–ª–∞–¥–∞–Ω–Ω—ñ</h4>
                <div class="about-content">
                    <div class="about-item">
                        <strong>KHAI Assistant</strong>
                        <span>–ü–µ—Ä—à—ã –±–µ–ª–∞—Ä—É—Å–∫—ñ –Ü–Ü-–ø–∞–º–æ—á–Ω—ñ–∫</span>
                    </div>
                    <div class="about-item">
                        <strong>–í–µ—Ä—Å—ñ—è</strong>
                        <span>3.0.4</span>
                    </div>
                    <div class="about-item">
                        <strong>–ê–±–Ω–æ—û–ª–µ–Ω–∞</strong>
                        <span id="appVersionDate">2025</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-links">
                <div class="links-grid">
                    <a href="https://khai.by/docs" target="_blank" class="link-item">
                        <i class="ti ti-book"></i> –î–∞–∫—É–º–µ–Ω—Ç–∞—Ü—ã—è
                    </a>
                    <a href="https://khai.by/support" target="_blank" class="link-item">
                        <i class="ti ti-headset"></i> –ü–∞–¥—Ç—Ä—ã–º–∫–∞
                    </a>
                    <a href="https://khai.by/guide" target="_blank" class="link-item">
                        <i class="ti ti-bookmark"></i> –î–∞–≤–µ–¥–∫–∞
                    </a>
                    <a href="https://khai.by/status" target="_blank" class="link-item">
                        <i class="ti ti-heartbeat"></i> –°—Ç–∞—Ç—É—Å
                    </a>
                    <a href="https://khai.by/blog" target="_blank" class="link-item">
                        <i class="ti ti-news"></i> –ë–ª–æ–≥
                    </a>
                    <a href="mailto:khuyew@proton.me" class="link-item">
                        <i class="ti ti-mail"></i> –°—É–ø—Ä–∞—Ü–æ—û–Ω—ñ—Ü—Ç–≤–∞
                    </a>
                </div>
                
                <div class="counters">
                    <!--LiveInternet counter--><a href="https://www.liveinternet.ru/click"
                    target="_blank"><img id="licntB611" width="88" height="31" style="border:0" 
                    title="LiveInternet: –ø–æ–∫–∞–∑–∞–Ω–æ —á–∏—Å–ª–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –∑–∞ 24 —á–∞—Å–∞"
                    src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAEALAAAAAABAAEAAAIBTAA7"
                    alt=""/></a><script>(function(d,s){d.getElementById("licntB611").src=
                    "https://counter.yadro.ru/hit?t52.6;r"+escape(d.referrer)+
                    ((typeof(s)=="undefined")?"":";s"+s.width+"*"+s.height+"*"+
                    (s.colorDepth?s.colorDepth:s.pixelDepth))+";u"+escape(d.URL)+
                    ";h"+escape(d.title.substring(0,150))+";"+Math.random()})
                    (document,screen)</script><!--/LiveInternet-->

                    <!-- Yandex.Metrika informer --> <a href="https://metrika.yandex.ru/stat/?id=104843405&amp;from=informer" target="_blank" rel="nofollow">     <img src="https://metrika-informer.com/informer/104843405/3_1_FFFFFFFF_EFEFEFFF_0_pageviews"          style="width:88px; height:31px; border:0;"          alt="–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞"          title="–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –¥–∞–Ω–Ω—ã–µ –∑–∞ —Å–µ–≥–æ–¥–Ω—è (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –≤–∏–∑–∏—Ç—ã –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏)"         class="ym-advanced-informer" data-cid="104843405" data-lang="ru"/> </a> <!-- /Yandex.Metrika informer -->
                </div>
                
                <a href="https://khai.by/github" target="_blank" class="github-link">
                    <i class="ti ti-brand-github"></i>
                </a>

                <div class="watermark">
                    –ó—Ä–æ–±–ª–µ–Ω–∞ –∑ ‚ù§Ô∏è —É –ë–µ–ª–∞—Ä—É—Å—ñ
                </div>
                
                <p class="copyright">
                    ¬© 2025 KHAI, –ë–µ–ª–∞—Ä—É—Å—å.<br>
                    –£—Å–µ –ø—Ä–∞–≤—ã –∞–±–∞—Ä–æ–Ω–µ–Ω—ã!
                </p>
            </div>
        </div>
    </div>

    <!-- Edit Chat Modal -->
    <div class="modal-overlay" id="editChatModal">
        <div class="modal">
            <div class="modal-header">
                <h3>–†—ç–¥–∞–≥–∞–≤–∞—Ü—å –Ω–∞–∑–≤—É —á–∞—Ç–∞</h3>
                <button class="modal-close" id="editChatModalClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-input-wrapper">
                    <input type="text" id="editChatNameInput" placeholder="–£–≤—è–¥–∑—ñ—Ü–µ –Ω–∞–∑–≤—É —á–∞—Ç–∞..." maxlength="16" class="modal-input">
                    <button class="modal-clear-input" id="modalClearInput" style="display: none;">
                        <i class="ti ti-x"></i>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="editChatModalCancel">–ê–¥–º–µ–Ω–∞</button>
                <button class="modal-btn primary" id="editChatModalSave">–ó–∞—Ö–∞–≤–∞—Ü—å</button>
            </div>
        </div>
    </div>

    <!-- Model Selection Modal -->
    <div class="modal-overlay" id="modelModalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3>–í—ã–±–µ—Ä—ã—Ü–µ –º–∞–¥—ç–ª—å –Ü–Ü</h3>
                <button class="modal-close" id="modelModalClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="model-list" id="modelList"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="modelModalCancel">–ê–¥–º–µ–Ω–∞</button>
                <button class="modal-btn primary" id="modelModalConfirm">–í—ã–±—Ä–∞—Ü—å</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h3>–î–∞–ø–∞–º–æ–≥–∞ –ø–∞ KHAI Assistant</h3>
                <button class="modal-close" id="helpModalClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-content" id="helpContent"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn primary" id="helpModalOk">–ó—Ä–∞–∑—É–º–µ–ª–∞</button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div class="modal-overlay" id="messageModal">
        <div class="modal large-modal">
            <div class="modal-header">
                <h3 id="messageModalTitle">–ü—Ä–∞–≥–ª—è–¥ –ø–∞–≤–µ–¥–∞–º–ª–µ–Ω–Ω—è</h3>
                <button class="modal-close" id="messageModalClose">
                    <i class="ti ti-x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="message-modal-content" id="messageModalContent"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn" id="messageModalCopy">
                    <i class="ti ti-copy"></i> –ö–∞–ø—ñ—è–≤–∞—Ü—å
                </button>
                <button class="modal-btn" id="messageModalSpeak">
                    <i class="ti ti-speakerphone"></i> –ê–≥—É—á—ã—Ü—å
                </button>
                <button class="modal-btn primary" id="messageModalCloseBtn">–ó–∞–∫—Ä—ã—Ü—å</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="./i18n.js"></script>
    <script src="./script.js"></script>

    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker –∑–∞—Ä—ç–≥—ñ—Å—Ç—Ä–∞–≤–∞–Ω—ã: ', registration);
                    })
                    .catch(error => {
                        console.log('–ü–∞–º—ã–ª–∫–∞ —Ä—ç–≥—ñ—Å—Ç—Ä–∞—Ü—ã—ñ ServiceWorker: ', error);
                    });
            });
        }
    </script>
</body>
</html>
