<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>KHAI ‚Äî AI –ß–∞—Ç</title>
    <meta name="description" content="–ë—ã—Å—Ç—Ä—ã–π AI-—á–∞—Ç –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤">
    <meta name="theme-color" content="#0099ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="KHAI">
    
    <!-- Critical CSS Inlined -->
    <style>
        /* Critical mobile-first styles */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            --bg-primary: #0f0f23; --bg-secondary: rgba(255,255,255,0.03);
            --text-primary: #fff; --accent-primary: #0099ff;
            --radius-lg: 12px; --safe-area-bottom: env(safe-area-inset-bottom, 0px);
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary); color: var(--text-primary);
            height: 100vh; height: 100dvh; overflow: hidden;
        }
        .app-container { 
            display: flex; flex-direction: column; height: 100%;
            padding-bottom: var(--safe-area-bottom);
        }
        
        /* Header */
        .app-header {
            padding: 8px 12px; padding-top: calc(8px + env(safe-area-inset-top, 0px));
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: var(--bg-secondary); backdrop-filter: blur(20px);
            display: flex; justify-content: space-between; align-items: center;
            height: 60px; flex-shrink: 0;
        }
        .logo { 
            width: 36px; height: 36px; border-radius: var(--radius-lg);
            background: linear-gradient(135deg, #0099ff, #0066ff);
            display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold;
        }
        
        /* Messages */
        .messages-container {
            flex: 1; overflow-y: auto; padding: 12px;
            scroll-behavior: smooth; -webkit-overflow-scrolling: touch;
        }
        .message {
            max-width: 90%; padding: 12px 16px; margin: 8px 0;
            border-radius: var(--radius-lg); line-height: 1.4;
            animation: messageSlideIn 0.3s ease;
        }
        .message-user {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white; margin-left: auto;
        }
        .message-assistant {
            background: rgba(255,255,255,0.08); margin-right: auto;
        }
        @keyframes messageSlideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Input */
        .input-section {
            padding: 12px; padding-bottom: calc(12px + var(--safe-area-bottom));
            border-top: 1px solid rgba(255,255,255,0.1);
            background: var(--bg-secondary); backdrop-filter: blur(20px);
        }
        .input-wrapper {
            display: flex; gap: 8px; align-items: flex-end;
        }
        .input-area { flex: 1; position: relative; }
        .input-area textarea {
            width: 100%; min-height: 50px; max-height: 120px;
            padding: 12px 50px 12px 16px; border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--radius-lg); background: var(--bg-primary);
            color: var(--text-primary); font-size: 16px; /* Prevent zoom on iOS */
            resize: none; outline: none; font-family: inherit;
        }
        .input-controls {
            position: absolute; right: 8px; bottom: 8px;
            display: flex; gap: 4px;
        }
        .send-btn {
            background: #0099ff; border: none; color: white;
            padding: 8px; border-radius: 10px; width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
        }
        
        /* Mobile sidebar */
        .mobile-sidebar-toggle {
            position: fixed; right: 16px; bottom: 100px;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 12px; border-radius: var(--radius-lg);
            z-index: 100; backdrop-filter: blur(10px);
        }
        
        /* Loading */
        .app-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-primary); display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 10000;
        }
        .loader-spinner {
            width: 40px; height: 40px; border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #0099ff; border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); }
        }
    </style>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-loader" id="appLoader">
        <div class="loader-spinner"></div>
        <div style="color: #fff; margin-top: 12px;">–ó–∞–≥—Ä—É–∑–∫–∞ KHAI...</div>
    </div>

    <div class="app-container" style="opacity: 0;">
        <!-- –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ö–µ–¥–µ—Ä -->
        <header class="app-header">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div class="logo">K</div>
                <div style="font-weight: bold; font-size: 18px;">KHAI</div>
            </div>
            <div style="display: flex; gap: 8px;">
                <button id="themeToggle" class="control-btn">üåô</button>
                <button id="menuToggle" class="control-btn">‚ò∞</button>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
        <main class="messages-container" id="messagesContainer">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </main>

        <!-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ -->
        <section class="input-section">
            <div class="input-wrapper">
                <div class="input-area">
                    <textarea id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea>
                    <div class="input-controls">
                        <button id="sendBtn" class="send-btn">‚û§</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
        <div class="mobile-sidebar" id="mobileSidebar" style="display: none;">
            <div style="padding: 20px;">
                <h3>–ú–µ–Ω—é</h3>
                <button id="clearChatBtn" style="width: 100%; padding: 12px; margin: 8px 0;">–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç</button>
                <button id="newChatBtn" style="width: 100%; padding: 12px; margin: 8px 0;">–ù–æ–≤—ã–π —á–∞—Ç</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
